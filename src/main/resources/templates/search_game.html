<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.0/dist/css/bootstrap.min.css"
          integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">
    <title>card</title>
    <style>
        body{
            background: #202539;
            width: 1180px;
        }
        #search-left{
            width: 830px;
            float: left;
        }
        h2{
            margin: 0;
            padding: 0;
            font-size: 14px;
            line-height: 45px;
            color: #7a80a2;
            background: #292e41;
            text-indent: 20px;
        }
        a{
            color: #000000;
            cursor: pointer;
            text-decoration: none;
        }
        a:link{

        }
        a:visited{

        }
        a:hover{
            background-color: black;
            text-decoration: none;
        }
        a:active{

        }

        ul{
            display: block;
            list-style-type: disc;
            margin-block-start: 1em;
            margin-block-end: 1em;
            margin-inline-start: 0px;
            margin-inline-end: 0px;
            padding-inline-start: 40px;
        }
        li{
            height: 100px;
            background: #33394d;
            margin-bottom: 10px;
            overflow: hidden;
            border-radius: 5px 5px 5px 5px;
        }
        .left{
            float: left;
            width: 25%;
        }
        .middle{
            margin: 0 150px 0 190px;
            padding: 15px 0;
        }
        .title{
            font-size: 16px;
            color: #b9c0ef;
            font-weight: bold;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
            margin-top:0;
            margin-bottom: 0;
        }
        .title span{
            display: inline-block;
            font-size: 12px;
            color: #ffffff;
            padding: 0 4px;
            font-weight: normal;
            line-height: 18px;
            border-radius: 2px 2px 2px 2px;
            margin-left: 6px;
            vertical-align: text-bottom;
        }
        p{
            display: block;
            margin-block-start: 1em;
            margin-block-end: 1em;
            margin-inline-start: 0px;
            margin-inline-end: 0px;
        }
        .title-tag{
            background: #fd115b;
        }
        .title-area {
            background: #3178F5;
            float: bottom;
        }
        .date{
            color: #7a80a2;
            margin-top: 6px;
            margin-bottom: 0;
        }
        .tags{
            margin-top: 6px;
            margin-bottom: 0;
        }
        .tag-block{
            margin-right: 5px;
            display: inline-block;
            line-height: 16px;
            padding: 0 2px;
            color: #7a80a2;
            border: 1px solid #7a80a2;
            border-radius: 2px 2px 2px 2px;
        }
        .right{
            float: right;
            margin-top: 40px;
        }
        .game-discount{
            color: #ffffff;
            background: #7a80a2;
            padding: 2px 4px;
            border-radius: 2px 2px 2px 2px;
            margin-right: 15px;
        }
        .game-origin-price{
            color: #7a80a2;
            text-decoration: line-through;
            margin-right: 15px;
        }
        .game-sale-price{
            color: #eb6100;
            font-size: 16px;
            font-weight: bold;
            margin-right: 15px;
            float: right;
        }
        img{
            border: 0;
            width: 190px;
            length: 100%;
        }
        div{
            display: block;
            margin: 0;
            padding: 0;
        }
        h2{
            margin: 0;
            padding: 0;
            font-size: 14px;
            line-height: 45px;
            color: #7a80a2;
            background: #292e41;
            text-indent: 20px;
        }
        #search-right{
            width: 350px;
            margin-left: 850px;
            padding-top: 16px;
            overflow: hidden;
        }
        .search-block{
            background: #33394d;
        }
        .search-tags{
            padding: 10px 0;
        }
        .tags-block{
            box-sizing: border-box;
            color: #7a80a2;
            font-size: 14px;
            float: left;
            line-height: 30px;
            width: 175px;
            padding-left: 20px;
        }
        .tags-block-wrapper{
            cursor: pointer;
        }
        .choose-fa{
            margin-right: 6px;
            display: inline-block;
            font: normal normal normal 14px/1 FontAwesome;
            font-size: inherit;
            text-rendering: auto;
            -webkit-font-smoothing: antialiased;
        }
    </style>
</head>
<body>
<div id="search-left">
    <ul id="game-list">
        <div style="width:800px">
            <!--            游戏信息-->
        </div>

    </ul>
    <nav aria-label="Page navigation example">
        <ul class="pagination justify-content-center">
        </ul>
    </nav>
</div>
<div id="search-right">
    <div>
        <div class="search-block" style="height: 95px">
            <h2 >按地区</h2>
            <div class="search-tags" style="height: 30%">
                <div class="tags-block">
                        <span class="tags-block-wrapper">
                            <i class="choose-fa"></i>中国站
                        </span>
                </div>
                <div class="tags-block">
                        <span class="tags-block-wrapper">
                            <i class="choose-fa"></i>国际站
                        </span>
                </div>
            </div>
        </div>
        <div class="search-block" style="height: 212px">
            <h2>按类型</h2>
            <div class="search-tags" style="height: 70%">
                <div class="tags-block">
                        <span class="tags-block-wrapper">
                            <i class="choose-fa"></i>动作
                        </span>
                </div>
                <div class="tags-block">
                        <span class="tags-block-wrapper">
                            <i class="choose-fa"></i>射击
                        </span>
                </div>
                <div class="tags-block">
                        <span class="tags-block-wrapper">
                            <i class="choose-fa"></i>策略
                        </span>
                </div>
                <div class="tags-block">
                        <span class="tags-block-wrapper">
                            <i class="choose-fa"></i>角色扮演
                        </span>
                </div>
                <div class="tags-block">
                        <span class="tags-block-wrapper">
                            <i class="choose-fa"></i>模拟
                        </span>
                </div>
                <div class="tags-block">
                        <span class="tags-block-wrapper">
                            <i class="choose-fa"></i>体育
                        </span>
                </div>
                <div class="tags-block">
                        <span class="tags-block-wrapper">
                            <i class="choose-fa"></i>独立
                        </span>
                </div>
                <div class="tags-block">
                        <span class="tags-block-wrapper">
                            <i class="choose-fa"></i>休闲
                        </span>
                </div>
                <div class="tags-block">
                        <span class="tags-block-wrapper">
                            <i class="choose-fa"></i>竞速
                        </span>
                </div>
                <div class="tags-block">
                        <span class="tags-block-wrapper">
                            <i class="choose-fa"></i>冒险
                        </span>
                </div>
            </div>
        </div>
        <div class="search-block" style="height: 124px">
            <h2>热门标签</h2>
            <div class="search-tags" style="height: 50%">
                <div class="tags-block">
                        <span class="tags-block-wrapper">
                            <i class="choose-fa"></i>免费游戏
                        </span>
                </div>
                <div class="tags-block">
                        <span class="tags-block-wrapper">
                            <i class="choose-fa"></i>新品游戏
                        </span>
                </div>
                <div class="tags-block">
                        <span class="tags-block-wrapper">
                            <i class="choose-fa"></i>热门游戏
                        </span>
                </div>
                <div class="tags-block">
                        <span class="tags-block-wrapper">
                            <i class="choose-fa"></i>促销游戏
                        </span>
                </div>
            </div>
        </div>
        <div class="search-block" style="height: 94px">
            <h2>按语言</h2>
            <div class="search-tags" style="height: 30%">
                <div class="tags-block">
                        <span class="tags-block-wrapper">
                            <i class="choose-fa"></i>中文
                        </span>
                </div>
                <div class="tags-block">
                        <span class="tags-block-wrapper">
                            <i class="choose-fa"></i>英文
                        </span>
                </div>
            </div>
        </div>
        <div class="search-block" style="height: 124px">
            <h2>按价格</h2>
            <div class="search-tags" style="height: 30%">
                <div class="tags-block">
                        <span class="tags-block-wrapper">
                            <i class="choose-fa"></i>￥0-10
                        </span>
                </div>
                <div class="tags-block">
                        <span class="tags-block-wrapper">
                            <i class="choose-fa"></i>￥11-50
                        </span>
                </div>
                <div class="tags-block">
                        <span class="tags-block-wrapper">
                            <i class="choose-fa"></i>￥51-100
                        </span>
                </div>
                <div class="tags-block">
                        <span class="tags-block-wrapper">
                            <i class="choose-fa"></i>>=￥101
                        </span>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="extlib/jquery-3.5.1/jquery-3.5.1.min.js"></script>
<script type="text/javascript">
    $(document).ready(function () {
        function getGameList() {
            $.get(
                "/store/gameShow",
                function(gamelist){
                    var gamel=gamelist.resultMap.gameList
                    var html="";
                    for(var i=0;i<gamel.length;i++){
                        var game=gamel[i]
                        var temp=(parseFloat(game.gprice)*(parseFloat(game.discount))).toString();
                        if(temp.length>6){
                            temp.substr(0,6);
                        }
                        var typelist = game.gtype;
                        typelist = typelist.substring(1,typelist.length-1);
                        console.log(typelist)
                        typelist = typelist.split(",")

                        html+=
                            "<li>"+
                            "<a href="+"game_detail.html?gid=game.gid"+" class="+" "+">"+
                            "<div class="+"left"+"><img src="+game.phref+"></div>"+
                            "<div class="+"right"+">"+
                            "<span class="+"game-discount"+">"+game.discount+"</span>"+
                            "<span class="+"game-origin-price"+">￥"+game.gprice+"</span>"+
                            "<span class="+"game-sale-price"+">￥"+temp+"</span>"+
                            "</div>"+
                            "<div class="+"middle"+">"+
                            "<p class="+"title"+">"+
                            game.gname+
                            "<span class="+"title-tag"+">促销</span>"+
                            "<span class="+"title-area"+">国际站</span>"+
                            "</p>"+
                            "<p class="+"date"+">发行于"+game.realeasedate+"</p>"+
                            "<p class="+"tags"+">"

                        for(var j=0;j<typelist.length;j++){
                            html+=
                                "<span class="+"tag-block"+">"+typelist[j].substring(1,typelist[j].length-1)+"</span>"
                        }
                        html+="</p>"+
                            "</div>"+
                            "</a>"+
                            "</li>"
                    }
                    $("#game-list").html(html)
                }
            )
        }
        function selectPage(word="") {
            $.get(
                "/movie/search/page?word=".concat(word),
                function (page) {
                    if (page.pageNumber === 0) {
                        $(".pagination").html("")
                        return
                    }
                    tempPage = page
                    var html =""

                    for(var i=1;i<=tempPage.pageNumber;i++){
                        if (tempPage.current === i) {
                            html +=
                                "<li class=\"page-item active\"><a class=\"page-link\" href=\"#\">" + i + "</a></li>"
                        } else {
                            html +=
                                "<li class=\"page-item\"><a class=\"page-link\" href=\"#\">" + i + "</a></li>"
                        }
                    }
                    $(".pagination").html(html)
                }
            )

        }
        //为页码设置事件 -> 分页切换
        $(document).on("click", ".page-link", function () {
            //分页数据切换
            getGameList(Number(this.innerText))
            //分页栏的切换
            //将原有属性为 active 的 a 改为默认
            $(".active").removeClass("active")
            //将当前 a 的属性添加 active
            $(this.parentElement).addClass("active")
        })
        $()

        getGameList()
        selectPage()
    })

</script>
</body>
</html>